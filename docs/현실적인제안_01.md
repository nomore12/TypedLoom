# JSON → TypeScript 변환 서비스 기능 기획 (Free / Basic 플랜)

## 1. 전체 구조 개요

- **공통 코어 엔진**
  - JSON → TypeScript 타입/인터페이스로 변환하는 핵심 로직은 Free/Basic 공통 사용.
  - 배열/union 처리, optional/null 처리 등은 엔진 레벨에서 공통 구현.
- **Free 플랜**
  - 목표: “가볍게 붙여넣고 타입만 뽑아 쓰는 유틸”.
  - 특징: 로그인 없이 사용 가능, 타입 변환 위주, 호출 횟수 제한.
- **Basic 플랜**
  - 목표: “프론트엔드(React + TS + Zod + TanStack Query + RHF)의 작업 시간을 직접 줄여주는 유료 툴”.
  - 특징: 무제한 변환, Zod/Query/Form 코드까지 한 번에 생성, 히스토리 관리.

---

## 2. Free & Basic 공통 코어 기능 (엔진 레벨)

### 2-1. JSON → TypeScript 타입/인터페이스 생성

- 사용자는 JSON을 입력(붙여넣기, 파일 드래그&드롭 등).
- 엔진은 JSON을 파싱하여 타입 AST 생성 후 TypeScript 코드로 렌더링.
- 최상위 타입:
  - `interface` 또는 `type` 가능 (실제 노출 여부는 플랜별 정책에서 제어).
- 중첩 객체:
  - 별도의 타입/인터페이스로 분리하여 재사용.
  - 예: `user.profile.preferences` → `User`, `UserProfile`, `UserPreferences` 등.

### 2-2. 스마트 배열 / union 처리 (기본 전략)

- **배열에 서로 다른 타입이 섞인 경우**
  - primitive 혼합: `(string | number)[]` 등 union 배열 타입으로 생성.
  - 객체 혼합:
    - 가능한 경우, **하나의 superset 타입**으로 합치고 부족한 필드를 optional로 처리.
    - 극단적으로 다른 구조인 경우에만 `TypeA | TypeB` 형태의 union 타입 생성.
- 목표: `any[]` 사용을 최소화하고, 사람이 읽기 쉬운 union/optional 조합 생성.

### 2-3. optional / null 기본 처리

- 샘플에서 항상 등장하는 필드: 기본적으로 required.
- 일부 샘플에서만 등장하는 필드(향후 확장 시): optional로 추론 가능.
- `null` 값:
  - 기본 모드: `타입 | null` 형식으로 처리.
  - `null → optional` 해석 모드는 Basic 플랜에서 옵션으로 제공.

---

## 3. Free 플랜 – 상세 설계

### 3-1. 포지셔닝

- **목표**
  - transform.tools 같은 초간단 변환 경험 제공 + 우리 엔진의 “똑똑한 타입 추론”을 맛보게 하는 진입용 플랜.
- **타깃**
  - 토이/사이드 프로젝트, 빠르게 타입 뽑는 초기 사용자.
  - 아직 결제 의사는 없지만, 자주 사용하게 될 잠재 유료 고객.

### 3-2. 제공 기능

1. **JSON → TypeScript 타입/인터페이스 변환**
   - UI 구성:
     - 좌측: JSON 입력 에디터.
     - 우측: TypeScript 타입/인터페이스 출력 뷰어.
   - 출력 형태:
     - 기본: `interface` 기반.
     - 상단 토글로 `interface` / `type` 선택 가능(간단한 수준의 옵션은 Free에도 허용 가능).
   - 루트 타입 이름:
     - 상단에 “Root 타입 이름” 입력 필드 제공 (기본값: `Root`).
     - 사용자가 `GetUserResponse`, `User`, 등으로 변경 가능.

2. **배열, optional, null 자동 처리 (기본 수준)**
   - 배열:
     - primitive 혼합: union 배열 `(A | B)[]`.
     - 객체 혼합: 가능한 경우 **superset 타입 + optional 필드**로 자동 병합.
   - optional:
     - Free에서는 엔진의 자동 추론만 사용 (필드별 수동 토글 X).
   - null:
     - Free에서는 항상 `타입 | null`로 표현 (`null → optional` 모드는 Basic 전용).

3. **간단한 타입 스타일 옵션**
   - 루트 타입 이름 변경.
   - `interface` vs `type` 선택.
   - 세미콜론 유무, 기본 들여쓰기 등 최소한의 스타일 옵션(또는 고정).

4. **세션 수준 히스토리**
   - 같은 브라우저 세션에서 최근 변환 5개 정도를 메모리/로컬 상태에 저장.
   - 페이지 하단에 “최근 변환 1~5” 목록.
   - 클릭 시 JSON 및 결과를 다시 로드 (새로고침 시 초기화).

### 3-3. 제한 및 업그레이드 유도

1. **호출 횟수 제한**
   - 예: 하루 50회 무료 변환.
   - 한도 초과 시:
     - “오늘 무료 한도를 모두 사용했습니다. Basic 플랜으로 무제한 사용 가능” 팝업 및 업그레이드 안내.

2. **고급 기능 잠금**
   - Free에서는 다음 기능이 잠금 상태(아이콘/탭은 보이지만 클릭 시 업그레이드 안내):
     - Zod 스키마 탭.
     - TanStack Query 코드 탭.
     - React Hook Form 템플릿 탭.
     - `null → optional` 글로벌 토글.
     - 필드별 optional 수동 토글 UI.
     - 히스토리 영구 저장 / 이름 지정 기능.
   - 활용: **탭은 그대로 보여주되, 클릭 시 Basic 소개 모달** → 자연스러운 업그레이드 유도.

3. **복사 기능 제한**
   - Free:
     - TypeScript 타입/인터페이스 코드만 한 번에 복사.
   - “TS + Zod + Query + Form 전체 코드 한 번에 복사”는 Basic 전용 기능으로 두어 차별화.

---

## 4. Basic 플랜 – 상세 설계

### 4-1. 포지셔닝

- **목표**
  - “JSON 한 번 붙여넣었더니, 프론트엔드 코드 70%가 자동으로 생겼다”를 구현하는 플랜.
- **타깃**
  - Next.js / React / TypeScript 사용 프론트엔드 개발자.
  - Zod + TanStack Query + React Hook Form을 병행하는 실무자.

### 4-2. Basic 플랜 핵심 기능

#### 4-2-1. 무제한 변환

- Free의 일일 호출 제한 제거.
- 한 달에 변환을 몇천 번 하든 요금 동일(4,900원 가정).
- 서버 보호를 위해 “초당 호출 수” 수준의 rate limit 정도만 완화된 형태로 적용 가능.

#### 4-2-2. 고급 타입 옵션

1. **`null → optional` 글로벌 토글**
   - 상단 설정 영역에 옵션 제공:
     - 기본 모드: `타입 | null`.
     - Optional 모드: `필드?: 타입` (union에서 `null` 제거).
   - 예:
     - JSON: `{ "name": null }`
     - 기본 모드: `name: string | null;`
     - Optional 모드: `name?: string;`

2. **필드별 optional 수동 조정 UI**
   - 우측에 타입 구조 트리(필드 트리)를 렌더링.
   - 각 필드 옆에 체크박스:
     - 체크 해제 → 해당 필드를 optional(`?`)로 전환.
     - 재체크 → 다시 required로 변경.
   - 이 변경 사항이 실시간으로:
     - TypeScript 타입
     - Zod 스키마
     - Query/Form 템플릿
     에 반영.

3. **interface / type 정책 선택**
   - 루트 및 하위 타입 전체에 대해 정책 선택:
     - “전부 interface 사용”
     - “전부 type alias 사용”
     - “루트만 type, 나머지는 interface” 등 프리셋.
   - 팀 컨벤션에 맞는 스타일로 일괄 정리 가능.

#### 4-2-3. Zod 스키마 자동 생성

- JSON → TS 타입 결과를 기반으로 Zod 스키마 생성:
  - `z.string()`, `z.number()`, `z.boolean()`, `z.array()`, `z.object()` 등 기본 매핑.
- optional/nullable 처리:
  - 기본 모드: `타입 | null` → `.nullable()` 중심.
  - `null → optional` 모드: `.optional()` 중심으로 생성.
- 스키마 네이밍:
  - 타입 이름 기반으로 `getUserResponseSchema`, `userSchema` 등 자동 생성.

#### 4-2-4. TanStack Query 타입/코드 템플릿

- 루트 타입 이름 예: `GetUserResponse` → 다음과 같은 템플릿 생성:
  - `type GetUserResponse = ...;`
  - `const useGetUser = () => useQuery<GetUserResponse>({...});`
- 기본 구조 예:
  - `queryKey: ['user', userId]`
  - `queryFn: () => fetch('/api/user').then(res => res.json())`
- 중요한 포인트:
  - `useQuery<여기에 정확한 타입>`이 붙은 형태로 코드 제공 → 개발자가 URL, queryKey만 수정하면 바로 사용 가능.

#### 4-2-5. React Hook Form + Zod resolver 템플릿

- Zod 스키마를 활용하여 Form 코드 템플릿 생성:
  - `type FormValues = z.infer<typeof getUserResponseSchema>;`
  - `const form = useForm<FormValues>({ resolver: zodResolver(getUserResponseSchema) });`
- 각 필드에 대한 기본 input 템플릿:
  - v1: `<input type="text" {...register('fieldName')} />` 수준의 간단 템플릿부터.
  - 이후 확장: 타입에 따라 `number`/`checkbox` 등으로 매핑 가능(장기 로드맵).

#### 4-2-6. 히스토리 및 작업 관리

- **히스토리 최대 50개 저장**
  - 초기 구현은 로컬스토리지 기반으로도 가능.
  - 항목별 이름 지정:
    - 예: “회원 조회 API 2025-11-29”, “결제 이력 조회 v2” 등.
- 히스토리 클릭 시:
  - JSON 입력, 타입 옵션, Zod/Query/Form 탭 내용까지 한 번에 복원.
- 추후 서버/계정 연동으로 “어디서든 접속 가능한 히스토리”로 확장 가능.

#### 4-2-7. 결과물 탭 + “한 번에 복사”

- 우측에 4개 탭:
  - **TS 타입**
  - **Zod**
  - **TanStack Query**
  - **React Hook Form**
- 각 탭 옆에 버튼:
  - “이 탭만 복사”
  - “4개 모두 복사”
- “4개 모두 복사”:
  - Basic 전용 기능.
  - Free 사용자는 버튼이 비활성화되어 있고, 클릭 시 업그레이드 안내 모달 표시.

---

## 5. 요약 – v1에서 현실적인 범위

### Free 플랜 (입구 역할)

- JSON → TypeScript 타입/인터페이스 변환.
- 엔진 공통의 “똑똑한 배열/optional/null 처리” 사용.
- 루트 타입 이름 변경 가능.
- `interface` vs `type` 간단 선택 가능.
- 하루 50회 정도의 호출 제한.
- 세션 수준의 간단한 히스토리(최근 5개).
- Zod/Query/Form 탭은 잠금 + 업그레이드 유도.

### Basic 플랜 (실제 시간 절약 툴)

- 무제한 JSON → Typescript 변환.
- 고급 타입 옵션:
  - `null → optional` 글로벌 모드.
  - 필드별 optional 수동 조정.
  - interface/type 정책 선택.
- Zod 스키마 자동 생성.
- TanStack Query 코드 스캐폴드.
- React Hook Form + zodResolver 스캐폴드.
- 히스토리 50개 저장 + 이름 지정.
- TS/Zod/Query/Form 4개 탭 제공 + “전체 한 번에 복사” 기능.

이 구성을 기준으로,  
**v1에서는 Free + Basic만 구현하고**,  
향후 Pro/LLM 기능은 별도 로드맵으로 단계적으로 올려가는 전략이 현실적이고 안전한 방향입니다.
