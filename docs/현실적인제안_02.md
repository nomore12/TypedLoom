# JSON → TypeScript 변환 서비스 기능 기획 v2 (Client-Side First & Interactive)

기존 `현실적인제안_01.md`의 비즈니스 모델(Free/Basic)을 유지하면서, **"인터랙티브 에디터"**와 **"클라이언트 사이드 아키텍처"**를 핵심 차별화 포인트로 강화한 버전입니다.

---

## 1. 핵심 철학 & 아키텍처

### 1-1. Client-Side First (브라우저 중심)
- **보안(Security)**: 사용자의 JSON 데이터가 서버로 전송되지 않고 브라우저 메모리 내에서만 처리됩니다. 기업 보안 가이드라인을 준수하는 데 유리합니다.
- **속도(Speed)**: 네트워크 왕복 없이 즉각적으로 변환 결과가 나옵니다.
- **비용(Cost)**: 서버 리소스(CPU/Memory)를 거의 쓰지 않고, 정적 호스팅(Vercel)만으로 운영 가능하여 유지비가 매우 낮습니다.

### 1-2. Interactive Tweak (변환 후 미세 조정)
- "한 번 변환하고 끝"이 아니라, **"변환된 결과를 입맛에 맞게 다듬는 도구"**로 포지셔닝합니다.
- 단순 텍스트 편집이 아닌, **구조화된 Tree View**에서 직관적으로 타입을 제어합니다.

---

## 2. 주요 기능 상세 (Feature Specs)

### 2-1. Smart Paste & Parsing
- **유연한 입력**:
  - 표준 JSON (`{"key": "value"}`)
  - JS Object (`{ key: 'value' }` - 따옴표 생략, 싱글 쿼트)
  - URL (`https://api.example.com/data.json` → fetch 시도)
  - cURL 명령어 (`curl -X GET ...` → 헤더/바디 파싱 시도)
- **동작**: 붙여넣는 순간 자동으로 포맷을 감지하여 JSON으로 정규화합니다.

### 2-2. Interactive Tree View (핵심 차별화)
좌측 에디터와 우측 코드 사이, 혹은 별도 패널에 **"JSON 구조 트리"**를 제공합니다.

- **UI 구성**:
  - JSON의 계층 구조를 트리로 시각화.
  - 각 노드(필드) 옆에 컨트롤 제공.
- **기능**:
  1.  **Optional 토글 (`?`)**:
      - 체크박스 해제 시: 해당 필드가 Optional로 변환됨.
      - TS: `field?: string`
      - Zod: `.optional()` 추가
  2.  **Rename (CamelCase 변환)**:
      - `user_id` 옆의 [Aa] 버튼 클릭 → `userId`로 변환.
      - 원본 JSON과의 매핑 정보(`@JsonProperty` 등)는 내부적으로 유지하거나 주석으로 처리.
  3.  **Type Override (고급)**:
      - 추론된 `string` 타입을 `Date`나 `Enum`으로 강제 지정하는 드롭다운 (Basic 플랜).

### 2-3. 4-Way Real-time Sync
Tree View에서의 조작이 다음 4가지 탭에 실시간으로 반영됩니다.

1.  **TypeScript**: `interface` / `type` 정의 업데이트.
2.  **Zod Schema**:
    - Optional 반영: `z.string().optional()`
    - Nullable 반영: `z.string().nullable()`
    - Rename 반영: `.transform()` 혹은 키 변경.
3.  **TanStack Query**:
    - 응답 타입이 제네릭으로 주입된 `useQuery` 훅 코드.
4.  **React Hook Form**:
    - Zod 스키마를 Resolver로 사용하는 `useForm` 보일러플레이트.

---

## 3. 플랜별 상세 기능 (Free vs Basic)

### 3-1. Free 플랜 (찍먹 & 개인용)
- **제한**: 하루 50회 변환 (로컬 스토리지 카운팅).
- **기능**:
  - Smart Paste 지원.
  - 기본 TS 변환 (Interface/Type 선택 가능).
  - **Tree View (Read-only)**: 구조 확인은 가능하나 수정 불가.
  - `null` 처리: 항상 `Type | null`.
  - 결과 복사: TS 탭만 가능.

### 3-2. Basic 플랜 (월 4,900원 - 실무용)
- **제한**: 무제한.
- **기능**:
  - **Interactive Tree View (Full Access)**:
    - Optional 토글, Rename, Type Override 가능.
  - **Global Null Strategy**:
    - "모든 Null을 Optional로 변환" 스위치 제공.
  - **Superset Merge**:
    - 배열 내 객체 구조가 다를 때 `(A & B partial)` 형태로 똑똑하게 병합.
  - **Full Code Gen**:
    - Zod, TanStack Query, React Hook Form 탭 접근 및 복사 가능.
    - "Copy All" 버튼 제공.
  - **History**:
    - 최근 작업 이력 저장 및 복원 (IndexedDB 활용).

---

## 4. UI/UX 레이아웃 제안

```
[ 헤더: 로고 | 플랜 토글 | 로그인 ]
---------------------------------------------------------
[ 좌측: Source ]         | [ 중앙: Tweak ]      | [ 우측: Output ]
                        |                      |
[ JSON 에디터 ]        | [ Tree View ]        | [ 탭: TS | Zod | Query | Form ]
- Smart Paste          | - root               |
- Format 버튼          |   - user [Aa] [v]    | export interface Root {
                       |     - id [Aa] [v]    |   user?: {
                       |     - name [Aa] [ ]  |     id: number;
                       |                      |     name?: string;
                       |                      |   }
                       |                      | }
---------------------------------------------------------
[ 하단: History (Basic only) ]
```

---

## 5. 개발 로드맵 (Phase 1 집중)

### Phase 1: Core Engine & Viewer (MVP)
- **목표**: "가장 빠르고 편한 JSON 뷰어 & TS 변환기"
- **구현**:
  - Next.js + Tailwind.
  - `quicktype-core` 브라우저 포팅.
  - Monaco Editor 연동.
  - 기본 Tree View 구현 (Read-only).

### Phase 2: Interactivity & Zod
- **목표**: "손으로 수정하는 것보다 편하다"는 경험 제공.
- **구현**:
  - Tree View에 토글/수정 액션 추가.
  - Zod 스키마 생성 로직 구현 (자체 로직 or 라이브러리).
  - 상태 관리 (Zustand 등)로 Tree 조작과 Output 동기화.

### Phase 3: Monetization
- **목표**: 결제 및 고급 기능 잠금 해제.
- **구현**:
  - Clerk (인증) + Stripe (결제).
  - Basic 전용 기능(Query/Form 탭, History) 활성화.

---

## 6. 결론
이 기획은 **"개발자의 귀찮음"**을 기술적으로 해결하는 데 초점을 맞춥니다.
특히 **Client-Side First**로 비용을 최소화하면서, **Interactive Tree View**로 기존 툴과 확실한 차별점을 만듭니다.
Phase 1부터 빠르게 프로토타이핑하여 "손맛"을 검증하는 것이 중요합니다.
